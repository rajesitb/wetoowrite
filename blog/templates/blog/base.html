<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    {% load blog_tags %}
    <meta charset="UTF-8">
    <meta name="author" content="Admin">
    <meta name="title" content="Blog Site">
    <meta name="keywords" content="blogging site, free blogging site, post article free">
    <meta name="description" content="A blog Site for penning down lessons learnt in the journey of life for others to draw
lessons from. The Site also servers as a guide for young men and women to choose their and academic and professional path
deliberately">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
          integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Metal+Mania&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">
    <!-- Bootstrap core CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.0/css/mdb.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Monoton&family=Pacifico&display=swap"
          rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'css/bootstrap.css' %}">
    <link rel="stylesheet" href="{% static 'css/mdb.css' %}">
    <link rel="icon" type="image/png" href="{% static 'images/logo2.PNG' %}">
    <style>
        a.nav-link:link {
            color: #1fffac;
        }

        a.nav-link:visited {
            color: black;
        }

        div a.dropdown-item:hover {
            color: #0b51c5;
        }
                .loading {
  background: transparent url({% static 'img/spinner.gif' %}) center no-repeat;
}
    </style>
    {% if title %}
        <title>W2W: {{ title }}</title>
    {% else %}
        <title>We Too Write</title>
    {% endif %}
</head>
{#<body oncontextmenu="return false;">#}
<body>
<!-- Navbar -->
<nav class="navbar fixed-top navbar-expand-lg navbar-dark indigo scrolling-navbar mb-5">
    <div class="container">

        <!-- Brand -->
        <a class="navbar-brand" href="{% url 'blog-home' %}" target="_blank">
            <img src="{% static 'images/logo2.PNG' %}" height="50px" width="50px"
                 style="border:4px solid white; padding: 1px;" alt="">
            <strong style="font-family: 'Metal Mania', cursive;font-size: 14px;">W</strong><span
                style="font-family: 'Metal Mania', cursive;font-size: 25px; color: #00e25b">2</span><strong
                style="font-family: 'Metal Mania', cursive;font-size: 14px;">W</strong>
        </a>

        <!-- Collapse -->
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent"
                aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Links -->
        <div class="collapse navbar-collapse" id="navbarSupportedContent">

            <!-- Left -->
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active home">
                    <a class="nav-link" href="{% url 'blog-home' %}">Home
                        <span class="sr-only">(current)</span>
                    </a>
                </li>

                <li class="nav-item news">
                    <a class="nav-link " href="{% url 'search-news' %}">NuzShot</a>
                </li>
                <li class="nav-item dropdown twitter">
                    <a class="nav-link waves-effect dropdown-toggle twitter" data-toggle="dropdown" href="#">TweeterSoup

                        <span class="sr-only"></span>
                    </a>
                    <div class="dropdown-menu ">
                        <a class="dropdown-item" href="{% url 'blog-twitter' %}">Tw Trends</a>
                        <a class="dropdown-item" href="{% url 'blog-twitter-search' %}">Tw
                            Sentimeter</a>
                    </div>
                </li>
                <li class="nav-item opinion">
                    <a class="nav-link " href="{% url 'article-show' %}">Opinion</a>
                </li>
                <li class="nav-item lenspeak">
                    <a class="nav-link " href="{% url 'picture-story-list' %}">LenSpeak</a>
                </li>
                {% if user.is_authenticated %}
                    <li class="nav-item dropdown post">
                        <a class="nav-link waves-effect dropdown-toggle" data-toggle="dropdown" href="#">Post

                            <span class="sr-only"></span>
                        </a>
                        <div class="dropdown-menu ">
                            <a class="dropdown-item" href="{% url 'blog-post' %}" target="_blank">Post a Blog</a>
                            <a class="dropdown-item" href="{% url 'article-form' %}" target="_blank">Post an Article</a>
                        </div>
                    </li>
                    <li class="nav-item draft">
                        <a class="nav-link" href="{% url 'post-draft' %}">Drafts</a>
                    </li>
                    <li class="nav-item dropdown manage">
                        <a class="nav-link waves-effect dropdown-toggle" data-toggle="dropdown" href="#">Manage

                            <span class="sr-only"></span>
                        </a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="{% url 'profile' %}">Edit Profile</a>
                            <a class="dropdown-item" href="{% url 'logout' %}">Logout</a>
                            <a class="dropdown-item" href="{% url 'password_change' %}">Change Password</a>
                        </div>
                    </li>
                {% endif %}

            </ul>

            <!-- Right -->

            <ul class="navbar-nav nav-flex-icons">
                <li class="nav-item about">
                    <a class="nav-link" href="{% url 'blog-about' %}">About</a>
                </li>
                {% if not user.is_authenticated %}
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'login' %}">Login</a>
                    </li>
                {% endif %}
            </ul>

        </div>

    </div>
</nav>
<!-- Navbar -->
{% block content %}
{% endblock %}
<!-- Start your project here-->
<!--Modal: Login / Register Form-->
<div class="modal fade" id="modalLRForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true">
    <div class="modal-dialog cascading-modal" role="document">
        <!--Content-->
        <div class="modal-content">

            <!--Modal cascading tabs-->
            <div class="modal-c-tabs">

                <!-- Nav tabs -->
                <ul class="nav nav-tabs md-tabs tabs-2 light-blue darken-3" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active " data-toggle="tab" href="#panel7" role="tab"><i
                                class="fas fa-user mr-1"></i>
                            Login</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link " data-toggle="tab" href="#panel8" role="tab"><i
                                class="fas fa-user-plus mr-1"></i>
                            Register</a>
                    </li>
                </ul>

                <!-- Tab panels -->
                <div class="tab-content">
                    <!--Panel 7-->
                    <div class="tab-pane fade in show active" id="panel7" role="tabpanel">

                        <!--Body-->
                        <form method="POST" action="{% url 'login' %}">
                            {% csrf_token %}
                            <div class="modal-body mb-1">
                                <div class="md-form form-sm mb-5">
                                    <i class="fas fa-user prefix"></i>
                                    <label for="id_username">Username:</label>
                                    <input type="text" name="username" autofocus required id="id_username"
                                           class="form-control form-control-sm validate">
                                </div>

                                <div class="md-form form-sm mb-4">
                                    <i class="fas fa-lock prefix"></i>
                                    <label for="id_password">Password:</label>
                                    <input type="password" name="password" required id="id_password"
                                           class="form-control form-control-sm validate">
                                </div>
                                <div class="text-center mt-2">
                                    <button class="btn btn-info">Log in <i class="fas fa-sign-in ml-1"></i></button>
                                </div>
                            </div>
                        </form>
                        <!--Footer-->
                        <div class="modal-footer">
                            <div class="options text-center text-md-right mt-1">
                                <p> <a href="{% url 'password_reset' %}" class="blue-text">Forgot Password?</a></p>
                            </div>
                            <button type="button" class="btn btn-outline-info waves-effect ml-auto"
                                    data-dismiss="modal">Close
                            </button>
                        </div>

                    </div>
                    <!--/.Panel 7-->

                    <!--Panel 8-->
                    <div class="tab-pane fade" id="panel8" role="tabpanel">

                        <!--Body-->
                        <form action="{% url 'register' %}" method="POST">
                            {% csrf_token %}
                            <div class="modal-body">
                                <div class="md-form form-sm mb-2">
                                    <i class="fas fa-user prefix"></i>
                                    <label for="id_username">Username:</label>
                                    <input type="text" name="username" maxlength="150" required id="id_username"
                                           class="form-control form-control-sm validate username">
                                </div>
                                <div class="md-form form-sm mb-2">
                                    <i class="fas fa-user prefix"></i>
                                    <label for="id_first_name">First name:</label>
                                    <input type="text" name="first_name" maxlength="30" title="Only alphabets"
                                           pattern="^[A-Za-z]+$" class="form-control form-control-sm validate"
                                           id="id_first_name">
                                </div>
                                <div class="md-form form-sm mb-2">
                                    <i class="fas fa-user prefix"></i>
                                    <label for="id_last_name">Last name:</label>
                                    <input type="text" name="last_name" maxlength="150" required="true"
                                           title="Only alphabets" pattern="^[A-Za-z]+$"
                                           class="form-control form-control-sm validate" id="id_last_name">
                                </div>

                                <div class="md-form form-sm mb-2">
                                    <i class="fas fa-envelope prefix"></i>
                                    <label for="id_email">Email:</label>
                                    <input type="email" name="email" required id="id_email"
                                           class="form-control form-control-sm validate email">
                                </div>

                                <div class="md-form form-sm mb-5">
                                    <i class="fas fa-lock prefix"></i>
                                    <label for="id_password1">Password:</label>
                                    <input type="password" name="password1" required id="id_password1"
                                           class="form-control form-control-sm validate">
                                </div>

                                <div class="md-form form-sm mb-4">
                                    <i class="fas fa-lock prefix"></i>
                                    <label for="id_password2">Password Confirmation:</label>
                                    <input style="margin-bottom:3px;padding:5px;" type="password" name="password2"
                                           required id="id_password2" class="form-control form-control-sm validate">
                                    <span style="margin-top:0;padding:0;">Password must match</span>
                                </div>
                                <div class="text-center form-sm mt-2">
                                    <button class="btn btn-info">Sign up <i class="fas fa-sign-in ml-1"></i>
                                    </button>
                                </div>
                                <div class="hint-text small ">By Registering you agree to our<a
                                        href="{% url 'blog-tnc' %}"
                                        class="text-success mt-5">T&C</a></div>

                            </div>
                        </form>
                        <!--Footer-->
                        <div class="modal-footer">
                            <button type="button" class="btn btn-outline-info waves-effect ml-auto"
                                    data-dismiss="modal">Close
                            </button>
                        </div>
                    </div>
                    <!--/.Panel 8-->
                </div>
            </div>
        </div>
        <!--/.Content-->
    </div>
</div>
<!--Modal: Login / Register Form-->
{% if not user.is_authenticated %}
    <div class="text-center">
    <a href="" class="btn purple-gradient btn-rounded my-3 login" data-toggle="modal" data-target="#modalLRForm">Quick
        Login/Register</a>
{% endif %}
</div>
<!-- End your project here-->

<!-- Footer -->
<footer class="page-footer font-small indigo pt-4">
    <!-- Footer Links -->
    <div class="container-fluid text-center text-md-left">
        <!-- Grid row -->
        <div class="row">
            <!-- Grid column -->

            <hr class="clearfix w-100 d-md-none pb-3">
            <!-- Grid column -->

            <!-- Grid column -->
            <div class="col-md-2 mt-md-0 mt-3 ">
                <!-- Content -->
                <h5 class="">Most Viewed</h5>
                <ul class="list-unstyled">
                    {% most_viewed as post_viewed %}
                    {% for post, view in post_viewed.items|slice:'5' %}
                        <li>
                            <a href="{{ post.get_absolute_url }}"><strong>{{ post.title }}</strong> by
                                <strong>{{ post.author.first_name|title }}</strong> </a>
                        </li>
                    {% endfor %}
                </ul>
            </div>
            <!-- Grid column -->
            <div class="col-md-3 mb-md-0 mb-2">
                <!-- Links -->
                <h5 class="">Most Commented</h5>
                {% most_commented_post as get_commented_posts %}
                <ul class="list-unstyled">
                    {% for post in get_commented_posts %}
                        <li>
                            {% if post.comments %}
                                <a href="{{ post.get_absolute_url }}"><strong>{{ post.title }}</strong> got

                                    <strong>{{ post.comments.count }}</strong>
                                    Comment{{ post.comments.count|pluralize }}</a>
                            {% else %}
                                <a href="{{ post.get_absolute_url }}"><strong>{{ post.title }}</strong> got
                                    <strong>{{ post.comments_article.count }}</strong>
                                    Comment{{ post.comments_article.count|pluralize }}</a>
                            {% endif %}
                        </li>
                    {% endfor %}
                </ul>
            </div>
            <div class="col-md-3 mb-md-0 mb-2">
                <h5 class="">Most Liked </h5>
                {% total_likes as liked_posts %}
                <ul class="list-unstyled">
                    {% for liked_post_title, liked_post_count in liked_posts.items %}

                        <li>
                            <strong>{{ liked_post_title }}</strong> got <strong>{{ liked_post_count }}</strong>
                            Like{{ liked_post_count|pluralize }}
                        </li>

                    {% endfor %}
                </ul>
            </div>
            <!-- Grid column -->
            <div class="col-md-3 mb-md-0 mb-3 ">
                <!-- Links -->
                <h5 class="">Member Actions</h5>
                <ul class="list-unstyled">
                    {% user_action user as user_activities %}
                    {% for action in user_activities %}
                        <li>
                            <a href="{% url 'user-posts' action.user.id action.user.get_full_name%}">
                                <strong>{{ action.user.first_name|title }}</strong> {{ action.verb }}
                                <a href="{{ action.target.get_absolute_url }}"><strong>
                                    {% if action.target.title %}{{ action.target.title }}
                                    {% else %} {{ action.target.story_title }}{% endif %}</strong></a> on
                                {% if action.created %}
                                    {{ action.created|date:"d M Y" }}{% else %}
                                    {{ action.uploaded_at|date:"d M" }}{% endif %}
                            </a>
                        </li>
                    {% endfor %}
                </ul>
            </div>
            <!-- Grid column -->
        </div>
        <!-- Grid row -->
    </div>
    <!-- Footer Links -->
    <!-- Copyright -->
    <div class="footer-copyright text-center py-3">© 2020 Copyright:
        <a href="https://www.wetoowrite.com/"> WeTooWrite.Com</a>
        <span class="mr-3" style="margin-left: 10px">Connect On</span>
        <!-- Facebook -->
        <a class="fb-ic" href="https://www.facebook.com/Wetoowrite-105613075035164" target="_blank">
            <i class="fab fa-facebook-f  white-text mr-md-5 mr-3 "> </i>
        </a>
        <!-- Twitter -->
        <a class="tw-ic" href="https://twitter.com/wetoowrite" target="_blank">
            <i class="fab fa-twitter  white-text mr-md-5 mr-3 "> </i>
        </a>

    </div>
    <!-- Copyright -->

</footer>
<!-- Footer -->
</body>
<script src="{% static 'js/jquery.min.js' %}"></script>
<script src="{% static 'js/popper.min.js' %}" async></script>
<script src="{% static 'js/mdb.min.js' %}" async></script>
<script src="{% static 'js/bootstrap.min.js' %}" async></script>
<script src="{% static 'js/modal_register.js' %}" async></script>
<script async src="https://static.addtoany.com/menu/page.js"></script>

<script>
    let csrftoken = jQuery("[name=csrfmiddlewaretoken]").val();

    function csrfSafeMethod(method) {
        // these HTTP methods do not require CSRF protection
        return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
    } //func
    $.ajaxSetup({
        beforeSend: function (xhr, settings) {
            if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                xhr.setRequestHeader("X-CSRFToken", csrftoken);
            }
        }
    }); //setup
    {#<!--    setup done Ajax-->#}
    $('.card-img-top').each(function () {
        let img = $(this);
       img.on('load', function () {
          img.css({background: 'none'})
       })
    })
    $(function () {
        let path = (window.location.pathname);
        if (path.includes('twitter')) {
            $('li.twitter').addClass('active').siblings().removeClass('active')
        } else if (window.location.pathname === '/search-news/') {

            $('li.news').addClass('active').siblings().removeClass('active')
        } else if (path.includes('article-show')) {

            $('li.opinion').addClass('active').siblings().removeClass('active')
        } else if (window.location.pathname === '/form-article/') {

            $('li.post').addClass('active').siblings().removeClass('active')
        } else if (window.location.pathname === '/about/') {
            $('li.about').addClass('active')
            $('.home').removeClass('active')
        } else if (window.location.pathname === '/picture-story/') {
            $('li.lenspeak').addClass('active')
            $('.home').removeClass('active')
        } else if (window.location.pathname === '/post-create/') {
            $('li.post').addClass('active')
            $('.home').removeClass('active')
        } else if (path.includes('update')) {
            $('li.post').addClass('active').siblings().removeClass('active')
        } else if (path.includes('picture')) {
            $('li.lenspeak').addClass('active').siblings().removeClass('active')
        } else if (path.includes('post-draft')) {
            $('li.draft').addClass('active').siblings().removeClass('active')
        } else if (path.includes('password_change')) {
            $('li.manage').addClass('active').siblings().removeClass('active')
        }
    })

</script>
{% block jquery %}
{% endblock jquery %}
</html>