{% extends 'blog/base.html' %}
{% load widget_tweaks %}
{% load crispy_forms_tags %}
{% load static %}

{% block content %}
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif:ital,wght@1,700&display=swap" rel="stylesheet">
    <div class="container" style="margin-top: 100px; ">
        <div class="row">
            <div class="col-12">
            <h4 class="text-danger mb-5" style=" background-color: #faf5f5; font-family: 'Noto Serif', serif;">This is a special search facility from the Twitter
           World to get info and overall sentiment</h4>
                <form action="" method="post">
                    {% csrf_token %}
                    {{ search_form }}
                    <input type="submit" class="mt-2 btn blue-gradient btn-rounded ">
                </form>
            {% if search_results %}
                <h4 class="mx-auto">Search Results</h4>
                <h4>Sentiment: {% if avg_c_polarity < -1 %} <span style="color: red"> Negative</span> {% elif avg_c_polarity > 1%} <span style="color: blue"> Positive </span> {% endif %}| Score: {{ avg_c_polarity }}</h4>
{% endif %}
            </div>
        </div>


        <div class="row">
            <div class="col-lg-6">
                <ul class="list-unstyled">
                    {% for result in search_results|slice:"0:10" %}
                        <li>
                            <img class="rounded-circle" src="{{ result.0 }}" alt=""> <strong>{{ result.1 }}</strong>
                            {% if result.3 %}
                            from {{ result.3 }}
                            {% endif %}
                            <p>{{ result.2 }}</p>
                            <p>Retweets: <strong>{{ result.7 }}</strong>, Likes: <strong>{{ result.8 }}</strong></p>
                            <p> Subjectivity: <strong>{{ result.5 }}</strong>, Polarity:{% if result.6 < 0 %} <span style="color: red"><strong>{{ result.6 }}</strong></span>
                            {% else %} <strong>{{ result.6 }}</strong> {% endif %}</p>
                            {% if result.4|length > 4 %}
                            <a href="{{ result.4 }}">{{ result.4 }}</a>
                            {% endif %}
                            {% if result.9 %}
                            <h6>Cumm Polarity:{% if result.9 < 0 %}<span style="color: red"><strong>{{ result.9 }}</strong> </span>{% else %} <strong>{{ result.9 }}</strong> {% endif %}</h6>

                            {% endif %}
                        </li>
                    {% endfor %}
                </ul>
            </div>
            <div class="col-lg-6">
                <ul class="list-unstyled">
                    {% for result in search_results|slice:"11:21" %}
                        <li>
                            <img class="rounded-circle" src="{{ result.0 }}" alt=""> <strong>{{ result.1 }}</strong>
                            {% if result.3 %}
                            from {{ result.3 }}
                            {% endif %}
                            <p>{{ result.2 }}</p>
                            <p>Retweets: <strong>{{ result.7 }}</strong>, Likes: <strong>{{ result.8 }}</strong></p>
                            <p> Subjectivity: <strong>{{ result.5 }}</strong>, Polarity:{% if result.6 < 0 %} <span style="color: red"><strong>{{ result.6 }}</strong></span>
                            {% else %} <strong>{{ result.6 }}</strong> {% endif %}</p>
                            {% if result.4|length > 4 %}
                            <a href="{{ result.4 }}">{{ result.4 }}</a>
                            {% endif %}
                            {% if result.9 %}
                            <h6>Cumm Polarity:{% if result.9 < 0 %}<span style="color: red"><strong>{{ result.9 }}</strong> </span>{% else %} <strong>{{ result.9 }}</strong> {% endif %}</h6>

                            {% endif %}
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>

{% endblock %}